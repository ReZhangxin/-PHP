## 端口监听

端口：就是一个数字，目的是让一台电脑（对外只有一个IP）能够对外提供多项服务（多种功能）。

行业默认有如下常见的服务和端口对应：

- web服务： 80
- ftp服务：  21
- 邮件收取服务：110
- 邮件发送服务：25
- mysql数据库服务：3306

一台电脑中，有6万多个端口，但通常一台服务器，一般只提供几个或10几个服务。

apache的端口监听设置，是指设定apache这个软件针对当前服务器的哪些端口提供web服务：

即apache是“服务生”，至于“外界”想要当前服务器提供什么服务，由外界提出“申请”（请求）。

通常，浏览器提出的都是web请求，但有些请求可能不在apache的服务范围内（端口不符）。

## 主机配置关键项

主机，虚拟主机，web站点，是指一个可以通过浏览器并使用某个域名进行访问的“web应用”

一个主机（站点），最核心的就两件事：

- 主机（站点）的名字：ServerName  “主机名”
- 主机（站点）的实际文件夹位置：DocumentRoot  “站点的实际完整路径”

apache的作用其实就是一个“转换”角色：将当前电脑中的某个文件夹，对外以某个域名（站点）的方式展现出来。换句话说：站点的本质就是一个文件夹。

当一个请求通常域名解析进入到当前apache并端口匹配成功后，apache就会开始“提供服务”。

- 1，在站点设置中找ServerName项，看是否匹配请求中的主机名。
- 2，如果找到，则在对应的目录（DucumentRoot配置项）中找相应的文件（可能是index.php,或其他）。
- 3，如果找到，则返回该文件（或调用php语言模块执行后返回）。
- 4，如果没第2步没有找到对应请求中的主机名，那么就将第一个主机当作准备提供服务的主机。

可见：只要ip解析和端口能够进入到当前服务器并匹配apache的端口设定，则apache一定会提供服务——即使主机名不匹配。

## 配置文件夹访问权限

```php
DocumentRoot "E:\wamp\www"

<Directory "E:\wamp\www">
    Options Indexes
    Order deny,allow
    Allow from all
</Directory>
```

并且在本地主机设置一下DNS

`C:\Windows\System32\drivers\etc`下的`hosts`

`127.0.0.1 www.zhangxin.com`把这段解析添加进去

```php
<Directory "E:\wamp\www">
# 用于设定可显示文件列表
    Options Indexes
# 用于设定权限的判断顺序：先拒绝，后允许
    Order deny,allow
# 允许所有
    Allow from all
</Directory>
```

